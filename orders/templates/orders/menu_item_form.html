{# djlint:off #}
{% extends 'admin_dashboard_base.html' %}
{% load humanize %}
{% load cloudinary_tags %}
{% block title %}
{{title}}
{% endblock %}
{% block page_title %}
{{title}}
{% endblock %}
{% block dashboard_content %}
<div class="max-w-3xl mx-auto"><div class="mb-6 flex items-center justify-between"><div><h1 class="text-2xl font-bold text-gray-800">{{title}}</h1><p class="text-gray-600 mt-1">Fill in the details below</p></div><a href="{%url 'orders:admin_menu'%}" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition"><svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>Back to Menu</a></div><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><form method="post" enctype="multipart/form-data">{%csrf_token%}{%if form.non_field_errors%}<div class="mb-4 p-4 bg-red-50 border border-red-200 rounded-lg"><p class="text-red-800 text-sm">{{form.non_field_errors}}</p></div>{%endif%}<div class="space-y-6"><div><label for="{{form.name.id_for_label}}" class="block text-sm font-medium text-gray-700 mb-2">Item Name <span class="text-red-500">*</span></label>{{form.name}}{%if form.name.errors%}<p class="mt-1 text-sm text-red-600">{{form.name.errors.0}}</p>{%endif%}</div><div><label for="{{form.description.id_for_label}}" class="block text-sm font-medium text-gray-700 mb-2">Description</label>{{form.description}}{%if form.description.errors%}<p class="mt-1 text-sm text-red-600">{{form.description.errors.0}}</p>{%endif%}</div><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div><label for="{{form.price.id_for_label}}" class="block text-sm font-medium text-gray-700 mb-2">Price (KSh) <span class="text-red-500">*</span></label>{{form.price}}{%if form.price.errors%}<p class="mt-1 text-sm text-red-600">{{form.price.errors.0}}</p>{%endif%}</div><div><label for="{{form.category.id_for_label}}" class="block text-sm font-medium text-gray-700 mb-2">Category <span class="text-red-500">*</span></label>{{form.category}}{%if form.category.errors%}<p class="mt-1 text-sm text-red-600">{{form.category.errors.0}}</p>{%endif%}</div></div><div><label for="{{form.tag.id_for_label}}" class="block text-sm font-medium text-gray-700 mb-2">Tag</label>{{form.tag}}{%if form.tag.errors%}<p class="mt-1 text-sm text-red-600">{{form.tag.errors.0}}</p>{%endif%}<p class="mt-1 text-xs text-gray-500">Add badges like "Popular" or "New"</p></div><div><label for="{{form.image.id_for_label}}" class="block text-sm font-medium text-gray-700 mb-2">Image</label>{%if menu_item.image%}<div class="mb-3"><img src="{{menu_item.image|smart_image_url}}" alt="{{menu_item.name}}" class="w-32 h-32 object-cover rounded-lg border border-gray-200"><p class="text-xs text-gray-500 mt-1">Current image</p></div>{%endif%}{{form.image}}{%if form.image.errors%}<p class="mt-1 text-sm text-red-600">{{form.image.errors.0}}</p>{%endif%}<p class="mt-1 text-xs text-gray-500">Upload a new image to replace the current one</p></div><div class="space-y-3"><div class="flex items-center">{{form.is_available}}<label for="{{form.is_available.id_for_label}}" class="ml-2 text-sm text-gray-700">Item is available for ordering</label></div><div class="flex items-center">{{form.is_featured}}<label for="{{form.is_featured.id_for_label}}" class="ml-2 text-sm text-gray-700">Feature on homepage (show in featured section)</label></div></div></div><div class="mt-8 pt-6 border-t border-gray-200"><div class="flex flex-col-reverse sm:flex-row sm:items-center sm:justify-between gap-3"><div class="w-full sm:w-auto">{%if menu_item%}<button type="button" onclick="showDeleteModal()" class="w-full sm:w-auto px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium"><svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>Delete Item</button>{%endif%}</div><div class="flex flex-col sm:flex-row gap-3 w-full sm:w-auto"><a href="{%url 'orders:admin_menu'%}" class="w-full sm:w-auto text-center px-6 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50 transition font-medium">Cancel</a><button type="submit" class="w-full sm:w-auto px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium"><svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>{{button_text}}</button></div></div></div></form></div></div>{%if menu_item%}<div id="deleteModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"><div class="bg-white rounded-xl shadow-2xl max-w-md w-full"><div class="p-6"><div class="flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><h3 class="text-lg font-bold text-gray-900 text-center mb-2">Delete Menu Item?</h3><p class="text-gray-600 text-center mb-6">Are you sure you want to delete "{{menu_item.name}}"? This will also remove it from all past orders. This action cannot be undone.</p><div class="flex gap-3"><button onclick="hideDeleteModal()" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition font-medium">Cancel</button><button onclick="confirmDelete()" class="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium">Delete</button></div></div></div></div><form id="deleteForm" method="post" action="{%url 'orders:delete_menu_item' menu_item.id%}" style="display:none">{%csrf_token%}</form><script>function showDeleteModal(){document.getElementById("deleteModal").classList.remove("hidden")}function hideDeleteModal(){document.getElementById("deleteModal").classList.add("hidden")}function confirmDelete(){document.getElementById("deleteForm").submit()}document.getElementById("deleteModal").addEventListener("click",function(e){if(e.target===this){hideDeleteModal()}})</script>{%endif%}
{% endblock %}